{"ast":null,"code":"import _objectSpread from\"D:/Appointment Scheduler/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useAuth}from'../context/AuthContext';import{Box,Typography,Button,TextField,Grid,Paper,CircularProgress,Divider,Avatar}from'@mui/material';import{toast}from'react-toastify';import PersonIcon from'@mui/icons-material/Person';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const{user,updateProfile}=useAuth();const[formData,setFormData]=useState({name:(user===null||user===void 0?void 0:user.name)||'',email:(user===null||user===void 0?void 0:user.email)||'',password:'',confirmPassword:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const{name,email,password,confirmPassword}=formData;const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));setError('');};const validateForm=()=>{if(!name||!email){setError('Name and email are required');return false;}if(password&&password!==confirmPassword){setError('Passwords do not match');return false;}if(password&&password.length<6){setError('Password must be at least 6 characters');return false;}return true;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm())return;setLoading(true);try{// Only include password if it was changed\nconst userData=_objectSpread({name,email},password&&{password});const success=await updateProfile(userData);if(success){toast.success('Profile updated successfully');}}catch(error){console.error('Error updating profile:',error);setError('Failed to update profile');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"My Profile\"}),/*#__PURE__*/_jsxs(Paper,{sx:{p:3,mt:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:80,height:80,mr:2,bgcolor:'primary.main'},children:/*#__PURE__*/_jsx(PersonIcon,{sx:{fontSize:50}})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",children:user===null||user===void 0?void 0:user.email}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Account Type: \",(user===null||user===void 0?void 0:user.role)==='business'?'Business':(user===null||user===void 0?void 0:user.role)==='admin'?'Administrator':'Customer']})]})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:3}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Edit Profile Information\"}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",variant:\"body2\",sx:{mb:2},children:error}),/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"name\",name:\"name\",label:\"Full Name\",value:name,onChange:handleChange,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"email\",name:\"email\",label:\"Email Address\",value:email,onChange:handleChange,required:true})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(Divider,{sx:{my:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:\"Change Password (leave blank to keep current password)\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"password\",name:\"password\",label:\"New Password\",type:\"password\",value:password,onChange:handleChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"confirmPassword\",name:\"confirmPassword\",label:\"Confirm New Password\",type:\"password\",value:confirmPassword,onChange:handleChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'flex-end',mt:2},children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:loading,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Save Changes'})})})]})})]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useAuth","Box","Typography","Button","TextField","Grid","Paper","CircularProgress","Divider","Avatar","toast","PersonIcon","jsx","_jsx","jsxs","_jsxs","Profile","user","updateProfile","formData","setFormData","name","email","password","confirmPassword","loading","setLoading","error","setError","handleChange","e","_objectSpread","target","value","validateForm","length","handleSubmit","preventDefault","userData","success","console","children","variant","component","gutterBottom","sx","p","mt","display","alignItems","mb","width","height","mr","bgcolor","fontSize","color","role","my","onSubmit","container","spacing","item","xs","fullWidth","id","label","onChange","required","md","type","justifyContent","disabled","size"],"sources":["D:/Appointment Scheduler/client/src/pages/Profile.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  TextField,\r\n  Grid,\r\n  Paper,\r\n  CircularProgress,\r\n  Divider,\r\n  Avatar\r\n} from '@mui/material';\r\nimport { toast } from 'react-toastify';\r\nimport PersonIcon from '@mui/icons-material/Person';\r\n\r\nconst Profile = () => {\r\n  const { user, updateProfile } = useAuth();\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: user?.name || '',\r\n    email: user?.email || '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  \r\n  const { name, email, password, confirmPassword } = formData;\r\n  \r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    setError('');\r\n  };\r\n  \r\n  const validateForm = () => {\r\n    if (!name || !email) {\r\n      setError('Name and email are required');\r\n      return false;\r\n    }\r\n    \r\n    if (password && password !== confirmPassword) {\r\n      setError('Passwords do not match');\r\n      return false;\r\n    }\r\n    \r\n    if (password && password.length < 6) {\r\n      setError('Password must be at least 6 characters');\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  };\r\n  \r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) return;\r\n    \r\n    setLoading(true);\r\n    \r\n    try {\r\n      // Only include password if it was changed\r\n      const userData = {\r\n        name,\r\n        email,\r\n        ...(password && { password })\r\n      };\r\n      \r\n      const success = await updateProfile(userData);\r\n      \r\n      if (success) {\r\n        toast.success('Profile updated successfully');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      setError('Failed to update profile');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n        My Profile\r\n      </Typography>\r\n      \r\n      <Paper sx={{ p: 3, mt: 3 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\r\n          <Avatar sx={{ width: 80, height: 80, mr: 2, bgcolor: 'primary.main' }}>\r\n            <PersonIcon sx={{ fontSize: 50 }} />\r\n          </Avatar>\r\n          <Box>\r\n            <Typography variant=\"h5\">{user?.name}</Typography>\r\n            <Typography variant=\"body1\" color=\"text.secondary\">\r\n              {user?.email}\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Account Type: {user?.role === 'business' ? 'Business' : user?.role === 'admin' ? 'Administrator' : 'Customer'}\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        \r\n        <Divider sx={{ my: 3 }} />\r\n        \r\n        <Typography variant=\"h6\" gutterBottom>\r\n          Edit Profile Information\r\n        </Typography>\r\n        \r\n        {error && (\r\n          <Typography color=\"error\" variant=\"body2\" sx={{ mb: 2 }}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n        \r\n        <Box component=\"form\" onSubmit={handleSubmit}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                id=\"name\"\r\n                name=\"name\"\r\n                label=\"Full Name\"\r\n                value={name}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </Grid>\r\n            \r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                id=\"email\"\r\n                name=\"email\"\r\n                label=\"Email Address\"\r\n                value={email}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </Grid>\r\n            \r\n            <Grid item xs={12}>\r\n              <Divider sx={{ my: 1 }} />\r\n              <Typography variant=\"subtitle1\" gutterBottom>\r\n                Change Password (leave blank to keep current password)\r\n              </Typography>\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                fullWidth\r\n                id=\"password\"\r\n                name=\"password\"\r\n                label=\"New Password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={handleChange}\r\n              />\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} md={6}>\r\n              <TextField\r\n                fullWidth\r\n                id=\"confirmPassword\"\r\n                name=\"confirmPassword\"\r\n                label=\"Confirm New Password\"\r\n                type=\"password\"\r\n                value={confirmPassword}\r\n                onChange={handleChange}\r\n              />\r\n            </Grid>\r\n            \r\n            <Grid item xs={12}>\r\n              <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\r\n                <Button\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                  disabled={loading}\r\n                >\r\n                  {loading ? <CircularProgress size={24} /> : 'Save Changes'}\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Profile; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}